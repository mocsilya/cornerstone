---
products:
    new:
        limit: {{theme_settings.homepage_new_products_count}}
    featured:
        limit: {{theme_settings.homepage_featured_products_count}}
    top_sellers:
        limit: {{theme_settings.homepage_top_products_count}}
carousel: {{theme_settings.homepage_show_carousel}}
blog:
    recent_posts:
        limit: {{theme_settings.homepage_blog_posts_count}}
---
{{#partial "hero"}}
    {{{region name="home_below_menu"}}}
    {{#if carousel}}
	<div class="container container-hero">
        {{> components/carousel arrows=theme_settings.homepage_show_carousel_arrows play_pause_button=theme_settings.homepage_show_carousel_play_pause_button}}
	</div>
    {{/if}}
    {{{region name="home_below_carousel"}}}
{{/partial}}

{{#partial "page"}}

    {{#each shipping_messages}}
        {{> components/common/alert/alert-info message}}
    {{/each}}

<div class="main full">
{{#if theme_settings.custom_homepage_show_tabs}}
	{{#or (if products.featured) (if products.top_sellers) (if products.new)}}
		<ul class="tabs" data-tab role="tablist">
		    {{#if products.featured}}
		        <li class="tab is-active" role="presentation">
		            <a class="tab-title" href="#tab-featured" role="tab" tabindex="0" aria-selected="true" controls="tab-featured">{{lang 'products.featured' }}</a>
		        </li>
		    {{/if}}
		    {{#if products.top_sellers}}
		        <li class="tab" role="presentation">
		            <a class="tab-title" href="#tab-top" role="tab" tabindex="0" aria-selected="false" controls="tab-top">{{lang 'products.top' }}</a>
		        </li>
		    {{/if}}
		    {{#if products.new}}
		        <li class="tab" role="presentation">
		            <a class="tab-title" href="#tab-new" role="tab" tabindex="0" aria-selected="false" controls="tab-new">{{lang 'products.new' }}</a>
		        </li>
		    {{/if}}
		</ul>
		<div class="tabs-contents">
			{{#if products.featured}}
				<div role="tabpanel" aria-hidden="false" class="tab-content has-jsContent is-active" id="tab-featured">
					{{> components/products/featured products=products.featured columns=theme_settings.homepage_featured_products_column_count}}
				</div>
			{{/if}}
			{{#if products.top_sellers}}
				<div role="tabpanel" aria-hidden="false" class="tab-content has-jsContent" id="tab-top">
					{{> components/products/top products=products.top_sellers columns=theme_settings.homepage_top_products_column_count}}
				</div>
			{{/if}}
			{{#if products.new}}
				<div role="tabpanel" aria-hidden="false" class="tab-content has-jsContent" id="tab-new">
					{{> components/products/new products=products.new columns=theme_settings.homepage_new_products_column_count}}
				</div>
			{{/if}}
		</div>
	{{/or}}
	{{{region name="home_below_featured_products"}}}
	{{{region name="home_below_top_products"}}}
	{{{region name="home_below_new_products"}}}
{{else}}
    {{#if products.featured}}
        {{> components/products/featured products=products.featured columns=theme_settings.homepage_featured_products_column_count}}
    {{/if}}
    {{{region name="home_below_featured_products"}}}

    {{#if products.top_sellers}}
        {{> components/products/top products=products.top_sellers columns=theme_settings.homepage_top_products_column_count}}
    {{/if}}
    {{{region name="home_below_top_products"}}}

    {{#if products.new}}
        {{> components/products/new products=products.new columns=theme_settings.homepage_new_products_column_count}}
    {{/if}}
    {{{region name="home_below_new_products"}}}
{{/if}}
</div>
{{> components/custom/modal-subscribe}}
{{/partial}}
{{> layout/base}}
